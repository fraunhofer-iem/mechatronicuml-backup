<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Tutorial</title><meta content="DocBook XSL Stylesheets V1.77.0" name="generator"><link rel="home" href="index.html" title="Fujaba Real-Time Tool Suite Guide"><link rel="up" href="ch02.html" title="Chapter&nbsp;2.&nbsp;User Guide"><link rel="prev" href="ch02s03.html" title="How To..."><link rel="next" href="ch02s05.html" title="FAQ"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Tutorial</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="ch02s03.html">Prev</a>&nbsp;</td><th align="center" width="60%">Chapter&nbsp;2.&nbsp;User Guide</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="ch02s05.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tutorials"></a>Tutorial</h2></div></div></div>
	
	<p>
		This tutorial will show you how to create models with the Fujaba Real-Time Tool Suite.
		For that we will create all the required models of the following example.
	</p>
	<p>
		Let there be two robots called BeBots. One shall be the master and one the slave.
		The master BeBot has a task list and each task represents a target position the slave has to drive to.
		From this task list a task shall be sent to the slave BeBot and be executed by him.
		When the slave has finished the task within a given time, the master transmits the next one.
		If the slave fails executing the task in the given time, the same task will be sent again.
		For execution the slave shall know its current position.
		In this example we will abstract from engine control in the behavior of the BeBots.
	</p>
	<p>
		To implement this example in Fujaba models we will perform the following steps - as far as possible - gradually:
	</p>
	<div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
			<p>
			Create a new project for this tutorial
			</p>
		</li><li class="listitem">
			<p>
			Create data types for storing positions and the task list
			</p>
		</li><li class="listitem">
			<p>
			Create Message Interfaces defining message types for the communication between the BeBots
			</p>
		</li><li class="listitem">
			<p>
			Create a Real-Time Coordination Pattern "Delegation" defining how the master and the
			slave BeBots can communicate using the Message Interfaces
			</p>
		</li><li class="listitem">
			<p>
			Create Real-Time Statecharts (RTSCs) defining the behavior of the roles of the delegation pattern
			</p>
		</li><li class="listitem">
			<p>
			Create an Atomic Component for the Software of the BeBots
			</p>
		</li><li class="listitem">
			<p>
			Create an Atomic Component for the position detection of the BeBots (abstracted as a GPS module)
			</p>
		</li><li class="listitem">
			<p>
			Create a Structured Component defining how a master resp. slave BeBot is constructed
			</p>
		</li><li class="listitem">
			<p>
			Create RTSCs defining the behavior of the components and the components&rsquo; ports
			</p>
		</li><li class="listitem">
			<p>
			Create a Component Instance Configuration to bind the whole example
			</p>
		</li><li class="listitem">
			<p>
			Finally we create a Deployment to allocate the defined software components to hardware nodes
			</p>
		</li></ol></div>
	
	
	<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N202D2"></a>Step 1: Create a new project</h3></div></div></div>
		<p>
			Before we can start modeling the example, we need a project to work in.
			Click on "File --&gt; New --&gt; Other" as seen in the following screenshot:
			</p><div class="figure"><a name="img:step001"></a><p class="title"><b>Figure&nbsp;2.12.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep001.png" width="648"></div>
			</div></div><p><br class="figure-break">
			Select "Project" from the folder "General" and click "Next".
			</p><div class="figure"><a name="img:step002"></a><p class="title"><b>Figure&nbsp;2.13.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep002.png"></div>
			</div></div><p><br class="figure-break">
			Name the project "Fujaba_Tutorial" and click "Finish".
			You now have created an empty project that can be seen in the Project Explorer View.
		</p>
		<p>
			Now right click on the new project and select "New --&gt; Other".
			Within the folder "Fujaba" select "Fujaba Model" and click "Next".
			Change the file name to "FujabaTutorial.fujaba" and click "Finish".
			Open the project "Fujaba_Tutorial" by double clicking.
			There you can see a file "FujabaTutorial.fujaba".
			This is the Fujaba model you created in the last step.
			Your window should look like this now:
			</p><div class="figure"><a name="img:step003"></a><p class="title"><b>Figure&nbsp;2.14.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep003.png" width="648"></div>
			</div></div><p><br class="figure-break">
			Now we can start defining the models described in the introduction.
		</p>
	</div>
	
	
	<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N20309"></a>Step 2: Create Message Interfaces (and Data Types)</h3></div></div></div>
		<p>
			First of all we need two Message Interfaces that define the interfaces
			for a coordination pattern that we generate in step 3.
			For that, right click on your "FujabaTutorial.fujaba" model and select
			"New --&gt; Other". Within "Fujaba --&gt; Diagrams" select "Messageinterface Diagram"
			and click "Next", as seen in the following screenshot:
			</p><div class="figure"><a name="img:step005"></a><p class="title"><b>Figure&nbsp;2.15.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep005.png"></div>
			</div></div><p><br class="figure-break">
			Change the file name to "delegation.messageinterface_diagram" and click  "Next".
			Make sure that the correct model is selected (FujabaTutorial.fujaba) and click "Finish".
			The generation of new models always works like this whereas you need to select another
			model than "Messageinterface Diagram" of course.
		</p>
		<p>
			The Message Interface diagram opens in a new tab.
			You can also find it within your project folder.
		</p>
		
		
		<p>
			First of all we need two array data types for this tutorial.
			The first type is called "XYPosition" and is an integer array with two
			entries for the x and y value of a position. 
			The second type is called "XYPositionArray" and is an array with ten
			entries of type "XYPosition" representing the task list of the master BeBot.
		</p>
		<p>
			To create these types right click onto the drawing surface of any diagram
			(here you only have the Message Interface diagram) and select
			"Fujaba --&gt; Open Type Dialog", as seen in the next screenshot.
			
			</p><div class="figure"><a name="img:step006"></a><p class="title"><b>Figure&nbsp;2.16.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep006.png" width="648"></div>
			</div></div><p><br class="figure-break">
			A new dialog pops up. Here you can define your own array data types.
			For that, click on "Create". Now you can find a new type in the list.
			Click on it.In the lower part of the dialog you can change the properties.
			At this point we want to create the XYPosition type.
			Therefore, change the properties as follows:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
      				<span class="bold"><strong>Cardinality:</strong></span> 2
      			</p></li><li class="listitem" style="list-style-type: disc"><p>
      				<span class="bold"><strong>Comment:</strong></span> x and y values of a position
      			</p></li><li class="listitem" style="list-style-type: disc"><p>
      				<span class="bold"><strong>Name:</strong></span> XYPosition
      			</p></li><li class="listitem" style="list-style-type: disc"><p>
      				<span class="bold"><strong>Type:</strong></span> Primitive Data Type INT
      			</p></li></ul></div><p>
      		The settings can also be seen in the following screenshot:
      		</p><div class="figure"><a name="img:step007"></a><p class="title"><b>Figure&nbsp;2.17.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep007.png"></div>
			</div></div><p><br class="figure-break">
			After this create the XYPositionArray type with the following properties:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
      				<span class="bold"><strong>Cardinality:</strong></span> 10
      			</p></li><li class="listitem" style="list-style-type: disc"><p>
      				<span class="bold"><strong>Comment:</strong></span> an array of xy-positions
      			</p></li><li class="listitem" style="list-style-type: disc"><p>
      				<span class="bold"><strong>Name:</strong></span> XYPositionArray
      			</p></li><li class="listitem" style="list-style-type: disc"><p>
      				<span class="bold"><strong>Type:</strong></span> XYPosition
      			</p></li></ul></div><p>
      		Click "OK".
		</p>
		
		
		<p>
			Now we can start with our Message Interfaces.
			Open the file "delegation.messageinterface_diagram" and select "MessageInterface"
			within the palette on the right side of the editor.
			Click into the drawing surface and a new Message Interface will be created.
			Change the name to "Master2Slave" by selecting the interface and pressing F2 or
			double-clicking on the name of the interface.
			Changing the name of an element should always be possible this way.
			If not, you have to change the property "Name" within the Properties View
			(<a class="ulink" href="https://trac.cs.upb.de/mechatronicuml/wiki/FujabaTutorial#ThePropertiesView" target="_top">
	   			--&gt; How to use the Properties View
	   		</a>).
			Add a Message Type to the interface by selecting "MessageType" from the palette
			and clicking into the existing interface and name it "order".
			This message type needs a parameter. Hence click on "Parameter" and then on the
			message type "order". Name the parameter "target".
			Now it is the first time we need to change a property.
			For that click on the parameter "target".
			Within the Properties View you find the property "Type".
			Select "Array Data Type XYPosition" to set the type
			(<a class="ulink" href="https://trac.cs.upb.de/mechatronicuml/wiki/FujabaTutorial#ThePropertiesView" target="_top">
	   			--&gt; How to use the Properties View
	   		</a>).
			Your diagram should look like this now:
			</p><div class="figure"><a name="img:step008"></a><p class="title"><b>Figure&nbsp;2.18.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep008.png" width="648"></div>
			</div></div><p><br class="figure-break">
			Now create a second Message Interface with the following properties analogously:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
	   				<span class="bold"><strong>Name:</strong></span> Slave2Master
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
	      			<span class="bold"><strong>MessageType:</strong></span> "fail" and "done" without any paramters
	      		</p></li></ul></div><p>
	      	You probably should save your work now. The Message Interface diagram should look like this:
	      	</p><div class="figure"><a name="img:step009"></a><p class="title"><b>Figure&nbsp;2.19.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep009.png" width="648"></div>
			</div></div><p><br class="figure-break">
		</p>
	</div>
	
	
	<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N203CF"></a>Step 3: Create a Real-Time Coordination Pattern "Delegation"</h3></div></div></div>
		<p>
			To define how the master and the slave BeBots of our example can communicate
			we need to create a Real-Time Coordination Pattern.
			As said before we need a pattern named "Delegation".
			This pattern defines the coordination of how a master part delegates work to the slave part.
			Therefore, create a Pattern diagram analogously to the way of generating a Message Interface
			diagram with the name "delegation.pattern_diagram".
		</p>
		<p>
			In the editor that opens in a new tab we can now define Coordination Patterns.
			Click on "CoordinationPattern" and then onto the drawing surface to add a new pattern.
			Change the name "pattern" to "Delegation" and the names "role1" and "role2" to "master"
			and "slave". At this moment your diagram should look like this:
			</p><div class="figure"><a name="img:step010"></a><p class="title"><b>Figure&nbsp;2.20.&nbsp;</b></p><div class="figure-contents">
			<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep010.png" width="648"></div>
			</div></div><p><br class="figure-break">
			Furthermore we need to set Message Interfaces for the roles that define which message
			types they can use for communication. For that click on the role "master".
			Within the category "Misc" you can find the properties
			"Receiver Message Interface" and "Sender Message Interface".
			As Receiver Message Interface select "Message Interface Slave2Master" and as Sender Message
			Interface select "Message Interface Master2Slave".
			Summarizing this means that the master BeBot can send messages of the message type
			order( target: XYPosition) and receive messages of the types fail() and done().
		</p>
		<p>
			For the role "slave" we also have to set these interfaces.
			As Receiver Message Interface select "Message Interface Master2Slave"
			and as Sender Message Interface select "Message Interface Slave2Master". 
			The assignments of the interfaces are vice versa to the master role,
			because it is the opposition of the communication.
		</p>
		<p>
			By setting these interfaces we defined our roles to be in-out-roles.
			That is shown by the two triangles on the inside of a role.
		</p>
		<p>
			When you now save your work, two red Xs appear at the roles.
			These Xs tell you that your model violates constraints of the Mechatronic UML.
			When you move the cursor to an X and wait a second a description pops up.
			At this point we did not set a behavior in form of a Real-Time Statechart for the roles.
			Therefore, we have to create two RTSCs describing the behavior first.
		</p>
		<p>
			At this point your Pattern diagram should look like this:
			</p><div class="figure"><a name="img:step011"></a><p class="title"><b>Figure&nbsp;2.21.&nbsp;</b></p><div class="figure-contents">
			<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep011.png" width="648"></div>
			</div></div><p><br class="figure-break">
		</p>
	</div>
	
	
	<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N20404"></a>Step 4: Create RTSC for role behavior</h3></div></div></div>
		<p>
			Now we want to describe the roles&rsquo; behavior by assigning RTSCs.
			These RTSCs have to be created first.
		</p>
		<p>
			Therefore, create a RTSC diagram with the name "role_master.realtimestatechart_diagram".
			In the editor that opens in a new tab we can now define our first RTSC.
			In the upper left corner of the drawing surface you can see a small rectangle.
			That is our RTSC. Select it and make it a little bigger.
			Press F2 to change the name and set it to "rtsc_role_master".
		</p>
		<p>
			As said before this RTSC shall describe the behavior of the role "master"
			of our delegation pattern.
			Therefore, click on the rectangle and take a look into the Properties View.
			Within the category "General" you can find the property "Behavioral Element".
			Of course choose "Role Delegation.master". Now the master role of our pattern is 
			linked to this RTSC.
		</p>
		<p>
			Moreover the RTSC needs a clock.
			To add clocks click on the Property "Clocks" within the category "Misc".
			In the value field click on the button "&hellip;".
			A dialog opens that looks similar to the data type dialog seen before.
			Analogously create a new clock by clicking on "Create" and name it "c_timeout".	
		</p>
		<p>
			Now we need some states.
			Therefore, click on "State" in the palette and then click into the
			RTSC and name the created state "Inactive".
			This state shall be our initial state for this RTSC.
			Within the Properties View under "General" change the property "Initial" to true.
			Immediately the state is illustrated as an initial state.
		</p>
		<p>
			Now create a second state named "Waiting".
			This state shall have a clock invariant.
			To add one, select the state and under "Misc" in the Properties View select
			"Invariants" and click on "&hellip;".
			By clicking on "Create" within the new window a new clock constraint is added.
			Change the properties as follows to create one of the form 
			c_timeout &lt; 1000 :
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
	   				<span class="bold"><strong>Bound:</strong></span> 1000
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
	      			<span class="bold"><strong>Clock:</strong></span> Clock rtsc_role_master: c_timeout
	      		</p></li><li class="listitem" style="list-style-type: disc"><p>
	      			<span class="bold"><strong>Operator:</strong></span> LESS
	      		</p></li></ul></div><p>
	      	The RTSC should look like this now:
	      	</p><div class="figure"><a name="img:step012"></a><p class="title"><b>Figure&nbsp;2.22.&nbsp;</b></p><div class="figure-contents">
			<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep012.png" width="648"></div>
			</div></div><p><br class="figure-break">
			At this point we need some transitions between the two states.
			To add a transition select "Transition" in the palette and click on the state
			in which the transition should start, keep the mouse button pressed and drag
			the cursor to the state in which the transition should end.
			Add a transition from "Inactive" to "Waiting".
			The priority of the transition is chosen in the order you create the transitions,
			but you can also change it in the Properties View under "Misc".
			Here we want the priority to be 1.
			The transition shall carry a clock reset for the clock "c_timeout".
			Select the transition.
			Within the Properties View and the category "Clock" you can find the property
			"Clock Resets". Click on "&hellip;" of this property and a dialog pops up again. 
			Select the clock "c_timeout" and click on "Add" to add the chosen clock to the reset list.
			This can be seen in the following screenshot:
			</p><div class="figure"><a name="img:step013"></a><p class="title"><b>Figure&nbsp;2.23.&nbsp;</b></p><div class="figure-contents">
			<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep013.png"></div>
			</div></div><p><br class="figure-break">
			Furthermore the created transition from "Inactive" to "Waiting" should raise a message event.
			For that select the transition and in the Properties View within the category
			"Raise MessageEvent" the property "Instance Of" must be set. Select "Message Type order"
			to raise the message "order()" we defined a few steps before.
			You can choose this message type, because we set the behavior of the RTSC to the "master"
			role of our delegation pattern and this role has got the "Master2Slave" Message Interface
			as Sender Message Interface.
		</p>
		<p>
			Now create three transitions from "Waiting" to "Inactive" with the following properties:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
	   				Transition 1
	   				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
	      					Set the priority of this transition to 1.
	   					</p></li><li class="listitem" style="list-style-type: disc"><p>
							Add a clock constraint by clicking on "..." under "Clock --&gt; Clock Constraint"
							analogously to adding a clock reset with the following properties:
							</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
	      							<span class="Bold">Bound:</span> 1000
	      						</p></li><li class="listitem" style="list-style-type: disc"><p>
	      							<span class="Bold">Clock:</span> c_timeout
	      						</p></li><li class="listitem" style="list-style-type: disc"><p>
	      							<span class="Bold">Operator:</span> GREATER_OR_EQUAL
	      						</p></li></ul></div><p>				   						
	   					</p></li></ul></div><p>
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
	   				Transition 2
	   				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
	      					Set the priority of this transition to 2.
	   					</p></li><li class="listitem" style="list-style-type: disc"><p>
							Add a Trigger Message Event	of Message Type "fail" analogously
							to adding a Raise Message Event.				
	   					</p></li></ul></div><p>
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
	   				Transition 3
	   				</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
	      					Set the priority of this transition to 3.
	   					</p></li><li class="listitem" style="list-style-type: disc"><p>
							Add a Trigger Message Event	of Message Type "done".
	   					</p></li></ul></div><p>
	   			</p></li></ul></div><p>
	      	Your diagram should look like this now:
	      	</p><div class="figure"><a name="img:step014"></a><p class="title"><b>Figure&nbsp;2.24.&nbsp;</b></p><div class="figure-contents">
			<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep014.png" width="648"></div>
			</div></div><p><br class="figure-break">
			When you now open the delegation pattern you can see within the properties of the &ldquo;master&rdquo;
			role that the behavior is set to &ldquo;Real-Time Statechart rtsc_role_master&rdquo; automatically.
			Also the red X at the role should be gone.
		</p>
		<p>
			Anyway, what did we do now?
			Generally, we created a RTSC that describes the behavior of the role &ldquo;master&rdquo;
			of our delegation pattern.
			But what does this RTSC describe exactly.
			It says that a master role  is either in the state &ldquo;Inactive&rdquo; or &ldquo;Waiting&rdquo;.
			&ldquo;Inactive&rdquo; stands for the status the role did not delegate any work to the slave role.
			&ldquo;Waiting&rdquo; stand for the status the role did delegate some work and is waiting for an
			answer of the slave.
			The master delegates work by raising the message order().
			Now it has to wait for the slave, which is either sending done() if the work was successful
			or else fail(). If the master gets theses messages it changes its state to &ldquo;Inactive&rdquo; again.
			Furthermore the clock constraint we created has the consequence that if the slave
			does not answer within 1000 seconds the master also switches to &ldquo;Inactive&rdquo;.
		</p>
		<p>
			Now we have to define a RTSC for the role &ldquo;slave&rdquo;.
			The RTSC for the role &ldquo;slave&rdquo; is created analogously to the generation of the RTSC
			for the &ldquo;master&rdquo; role.
			That is why we do not describe it again in detail.
			
			You can find the file for the RTSC here (-&gt; link) and add it to your project as
			described here (-&gt; link).
			Otherwise you can build it up on your own by taking the following screenshot
			of the RTSC as a reference:
			</p><div class="figure"><a name="img:step015"></a><p class="title"><b>Figure&nbsp;2.25.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep015.png" width="648"></div>
			</div></div><p><br class="figure-break">
			Your delegation pattern should now be free of violations of constraints.
		</p>
	</div>
	
	
	<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N204CC"></a>Step 5: Create Atomic Components for Software and GPS</h3></div></div></div>
		<p>
			Now we want to start specifying the BeBots.
			Therefore we have to create two Atomic Components.
		</p>
		<p>
			Create a new Atomiccomponent Diagram named &ldquo;bebot_ac&rdquo;.
			Add an Atomic Component by clicking on &ldquo;AtomicComponent&rdquo; in the palette and then
			clicking into the drawing surface.
			Name it &ldquo;BeBot_SW&rdquo;. This component will describe how the BeBot works internally.
		</p>
		<p>
			Add a Hybrid Port to this Atomic Component by clicking on &ldquo;HybridPort&rdquo; in the palette
			and then clicking on the Atomic Component.
			Name it &ldquo;position&rdquo;.
			Select the Hybrid Port and set the type to XYPosition by selecting this in the Properties
			View under &ldquo;Misc --&gt; Type&rdquo;.
			Make sure that the port is an IN-port by checking the property &ldquo;Kind&rdquo; under &ldquo;General&rdquo;.
			Via this port the BeBot will request its position.
		</p>
		<p>
			Add a Discrete Port named &ldquo;master&rdquo; analogously.
			This port shall refine the role &ldquo;master&rdquo; from our delegation pattern.
			Therefore, you have to change some properties in the Properties View:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
	      			General --&gt; Refines: select &ldquo;Role Delegation.master&rdquo;
	      			(to bind the master role of the delegation pattern to this port)
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
					MessageInterface --&gt; Receiver Message Interface: select &ldquo;Slave2Master&rdquo;				
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
					MessageInterface --&gt; Sender Message Interface: select &ldquo;Master2Slave&rdquo;				
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
					Cardinality --&gt; Lower Bound: set to 0				
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
					Cardinality --&gt; Upper Bound: set to 1			
	   			</p></li></ul></div><p>
	   		The cardinality is chosen to be 0 or 1 because this component will be either
	   		build into a master BeBot or a slave BeBot.
	   		So if we have a master BeBot it will get the master port.
	   		A slave BeBot will not get this port of course.
		</p>
		<p>
			Now create a Discrete Port &ldquo;slave&rdquo; with the same properties,
			but commute the Message Interfaces.
			The refinement of course has to be set to &ldquo;Role Delegation.slave&rdquo;.
		</p>
		<p>
			Save your work.
			As we did not set behaviors for the Atomic Component BeBot_SW and the Discrete Ports,
			we are again getting some red Xs, but we will care about them later.
		</p>
		<p>
			Now create a new Atomic Component named &ldquo;GPS&rdquo; with the following properties:
			</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: bullet; "><li class="listitem" style="list-style-type: disc"><p>
	      			Make the component a continuous component by setting it under &ldquo;General --&gt; Component Type&rdquo;.
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
					Add a Continuous OUT-Port named &ldquo;position&rdquo; of type &ldquo;XYPosition&rdquo;.
	   			</p></li><li class="listitem" style="list-style-type: disc"><p>
					Add a Continuous IN-Port named &ldquo;gps&rdquo; of type &ldquo;XYPosition&rdquo;.			
	   			</p></li></ul></div><p>
	   		This component will be in charge of computing the position of the BeBot.
		</p>
		<p>
			Save your work. Your Atomic Component Diagram should look like this now:
			</p><div class="figure"><a name="img:step016"></a><p class="title"><b>Figure&nbsp;2.26.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep016.png" width="648"></div>
			</div></div><p><br class="figure-break">
		</p>
	</div>
	
	
	<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N20521"></a>Step 6: Create a Structure Component for the BeBot</h3></div></div></div>
		<p>
			Once we have defined our Atomic Components,
			we now can define the Structure of our BeBot as a whole by creating a Structured Component.
			Therefore, create a new Structured Component Diagram with the name &ldquo;bebot&rdquo;.
		</p>
			Add a new Structured Component by clicking on &ldquo;StructuredComponent&rdquo;
			in the palette and then clicking into the drawing surface. Name it &ldquo;BeBot&rdquo;.
		<p>
			Add a Component Part by selecting &ldquo;ComponentPart&rdquo; from the palette and clicking
			into the BeBot component. A new Component Part is generated.
			Now you have to set the type. For that in the Properties View select
			&ldquo;General --&gt; Component Type --&gt; BeBot_SW&rdquo; to set the type to the atomic component &ldquo;BeBot_SW&rdquo; 
			defined before. Name the component &ldquo;software&rdquo;.
		</p>
		<p>
			Add another Component Part of the type &ldquo;GPS&rdquo; with the name &ldquo;gps&rdquo; analogously.
		</p>
		<p>
			When you save this diagram now it shows the same errors at the Atomic Component Diagram,
			because the Atomic Component is contained in the current diagram.
			These errors will disappear as soon as we define a behavior for it.
		</p>
		<p>
			Your Diagram should look like this at the moment:
			</p><div class="figure"><a name="img:step017"></a><p class="title"><b>Figure&nbsp;2.27.&nbsp;</b></p><div class="figure-contents">
				<div class="mediaobject"><img src="User Guide/images/tutorial/tutorialStep017.png" width="648"></div>
			</div></div><p><br class="figure-break">
			Connect the &ldquo;position&rdquo; ports of both components by an assembly.
		</p>
		<p>
			Create a Discrete Port &ldquo;Slave&rdquo; at the border of the component &ldquo;BeBot&rdquo;.
			Set the Receiver Message Interface to &ldquo;Master2Slave&rdquo; and the Sender Message Interface to
			&ldquo;Slave2Master&rdquo;.
		</p>
		<p>
			Create a Discrete Port &ldquo;Master&rdquo; but with commuted Message Interfaces.
		</p>
		<p>
			Connect the Ports &ldquo;Master&rdquo; and &ldquo;master&rdquo; by a Delegation by clicking on &ldquo;Delegation&rdquo;
			in the palette and drag and drop from &ldquo;Master&rdquo; to &ldquo;master&rdquo;.
			Do the same with the &ldquo;Slave&rdquo; and &ldquo;slave&rdquo; ports. Now the ports of the &ldquo;BeBot_SW&rdquo;
			component are delegated to appropriate ports of the Structured Component.
		</p>
		<p>
			Now create a ContinuousPort &ldquo;Gps&rdquo; at the border of the component &ldquo;BeBot&rdquo; and connect
			it with a delegation to &ldquo;gps&rdquo;.
		</p>
		<p>
			Save your work. Now even more Xs are shown.
			That is because we did not define any behavior of these components and ports,
			but this will be changed in a few steps.
		</p>
	</div>
	
	
	<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N20554"></a>Step 7: RTSCs describing the behavior of the ports</h3></div></div></div>
		<p>
			We start with creating RTSCs for the Ports &ldquo;master&rdquo;, &ldquo;slave&rdquo; and &ldquo;position&rdquo;.
			The port &ldquo;gps&rdquo; does not need any behavior, because it is continuous.
		</p>
		<p>
			Create three RTSC diagrams with name &ldquo;port_master&rdquo;, &ldquo;port_slave&rdquo; and &ldquo;port_position&rdquo;.
			Name the RTSCs of the diagrams &ldquo;rtsc_port_master&rdquo; and so on.
			That is all for the moment. The rest of the definition of these diagrams will be done later,
			because they will be embedded into another RTSC.
		</p>
	</div>
	
	
	<div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="N20561"></a> Step 8: RTSCs describing the behavior of the Atomic Component BeBot_SW</h3></div></div></div>
		<p>
			Now we want to define the behavior of the software of a BeBot.
			Therefore, create a RTSC Diagram with name &ldquo;component_bebot-sw&rdquo;.
			Name the statechart itself &ldquo;rtsc_component_bebot-sw&rdquo;.
		</p>
		<p>
			... to be continued ....
		</p>
		
	</div>
</div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="ch02s03.html">Prev</a>&nbsp;</td><td align="center" width="20%"><a accesskey="u" href="ch02.html">Up</a></td><td align="right" width="40%">&nbsp;<a accesskey="n" href="ch02s05.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">How To...&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;FAQ</td></tr></table></div></body></html>