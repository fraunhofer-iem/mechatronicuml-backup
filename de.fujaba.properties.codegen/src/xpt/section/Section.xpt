«IMPORT properties»
«EXTENSION Metamodel»

«DEFINE Section FOR PropertySection»
public class «property.genFeature.genClass.ecoreClass.name»«property.genFeature.ecoreFeature.name.toFirstUpper()»Section extends «EXPAND superClass» {
	«EXPAND classBody»
}
«ENDDEFINE»

«DEFINE classBody FOR PropertySection»
	@Override
	public org.eclipse.emf.ecore.EStructuralFeature getFeature() {
		return «property.genFeature.genClass.genPackage.fullyQualifiedName()».«property.genFeature.genClass.genPackage.ecorePackage.name.toFirstUpper()»Package.eINSTANCE.get«property.genFeature.genClass.ecoreClass.name.toFirstUpper()»_«property.genFeature.ecoreFeature.name.toFirstUpper()»();
	}

	@Override
	protected String getLabelText() {
		return "«property.genFeature.ecoreFeature.name.toFirstUpper()»";
	}

	«EXPAND additionalMethods»
«ENDDEFINE»

«DEFINE additionalMethods FOR PropertySection»
«ENDDEFINE»

«DEFINE additionalMethods FOR GroupPropertySection»
	public «property.genFeature.genClass.ecoreClass.name»«property.genFeature.ecoreFeature.name.toFirstUpper()»Section() {
		«FOREACH referencedProperties.reject(p | p.active == false).property.section.reject(p | p == null) AS this»
		addSection(new «property.clazz.package.generator.genModel.modelPluginID».properties.«property.genFeature.genClass.genPackage.ecorePackage.name».section.«property.genFeature.genClass.ecoreClass.name»«property.genFeature.ecoreFeature.name.toFirstUpper()»Section());
		«ENDFOREACH»
	}
«ENDDEFINE»

«DEFINE additionalMethods FOR TextPropertySection»
	@Override
	protected boolean isMultiLine() {
		return «IF multiLine»true«ELSE»false«ENDIF»;
	}
«ENDDEFINE»

«DEFINE additionalMethods FOR ComboBoxPropertySection»
	@Override
	protected java.util.List<Object> getItems() {
		return new java.util.ArrayList<Object>();
	}
«ENDDEFINE»
«DEFINE additionalMethods FOR ListPropertySection»
	@Override
	protected java.util.List<Object> getItems() {
		java.util.List<Object> nodes = new java.util.ArrayList<Object>();
		nodes.add(null);

		org.eclipse.emf.common.util.TreeIterator<Object> it = org.eclipse.emf.ecore.util.EcoreUtil.getAllContents(getEditingDomain().getResourceSet(), true);
		while (it.hasNext()) {
			Object element = (Object) it.next();
			if (element instanceof «property.propertyType()») {
				nodes.add(element);
			}
		}

		return nodes;
	}
	
«ENDDEFINE»
«DEFINE additionalMethods FOR RadioPropertySection»
	@Override
	protected java.util.List<«property.propertyType()»> getValues() {
		return «property.propertyType()».VALUES;
	}
	
	@Override
	public void refresh() {
		super.refresh();
		checkEnabled();
	}

	protected boolean isEnabled(«property.propertyType()» state) {
//		if (getElement() instanceof ObjectVariable) {
//			ObjectVariable variable = (ObjectVariable) getElement();
//			BindingSemantics semantics = variable.getBindingSemantics();
//			BindingOperator operator = variable.getBindingOperator();
//
//			return ValidationUtil.isValid(state, semantics, operator);
//		}

		return true;
	}
«ENDDEFINE»

«DEFINE superClass FOR PropertySection»«this.metaType»«ENDDEFINE»

«DEFINE superClass FOR TextPropertySection»de.upb.swt.core.ui.properties.sections.AbstractTextSection«ENDDEFINE»
«DEFINE superClass FOR GroupPropertySection»de.upb.swt.core.ui.properties.sections.AbstractGroupSection«ENDDEFINE»
«DEFINE superClass FOR CheckboxPropertySection»de.upb.swt.core.ui.properties.sections.AbstractCheckboxSection«ENDDEFINE»
«DEFINE superClass FOR ComboBoxPropertySection»de.upb.swt.core.ui.properties.sections.AbstractComboSection<Object>«ENDDEFINE»
«DEFINE superClass FOR ListPropertySection»de.upb.swt.core.ui.properties.sections.AbstractComboSection<Object>«ENDDEFINE»
«DEFINE superClass FOR RadioPropertySection»de.upb.swt.core.ui.properties.sections.AbstractRadioGroupSection<«property.propertyType()»>«ENDDEFINE»
