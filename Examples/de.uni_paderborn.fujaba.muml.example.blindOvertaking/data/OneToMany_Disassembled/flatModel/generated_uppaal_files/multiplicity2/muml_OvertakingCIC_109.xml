<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'>
	<nta>
		<declaration>
urgent chan hurry;

typedef int[-2147483648,2147483647] MUMLInt;

typedef int[-32768,32767] MUMLShort;

typedef int[-128,127] MUMLByte;

const int NUM_OF_MESSAGE_KINDS = 4;

const int NUM_MAX_MESSAGES_IN_TRANSIT = 25;

const int MAX_OF_BUFFER_AND_CONNECTOR_SIZE = 5;

const int CONNECTOR_SIZE = 5;

const int MAX_NUM_OF_MESSAGE_BUFFERS_PER_ROLE = 1;

typedef int[0,NUM_MAX_MESSAGES_IN_TRANSIT] MessageId;

typedef int[0,NUM_OF_MESSAGE_KINDS] MessageKind;

typedef struct {
	MessageId mId;
	MessageKind mType;
	int mArgsPosition;
} Message;

typedef struct {
	int[0,MAX_OF_BUFFER_AND_CONNECTOR_SIZE] tail;
	Message messages[MAX_OF_BUFFER_AND_CONNECTOR_SIZE];
	bool messageDiscarded;
} Buffer;

typedef struct {
	MessageId muml_request_47MessageID;
	MUMLByte muml_speed_48_;
} muml_request_47Parameters;

typedef struct {
	MessageId muml_finished_50MessageID;
} muml_finished_50Parameters;

typedef struct {
	MessageId muml_laneChanged_44MessageID;
} muml_laneChanged_44Parameters;

typedef struct {
	MessageId muml_answer_45MessageID;
	bool muml_accept_46_0;
} muml_answer_45Parameters;

const int NUM_OF_DISCRETE_PORT_INSTANCES = 5;

const int NUM_OF_COMPONENT_INSTANCES = 5;

typedef int[0,NUM_OF_DISCRETE_PORT_INSTANCES-1] discretePortInstance;

typedef int[0,NUM_OF_COMPONENT_INSTANCES-1] componentInstance;

const int[-1,NUM_OF_DISCRETE_PORT_INSTANCES] next[discretePortInstance] = {1,-1,-1,-1,-1};

const int[-1,NUM_OF_DISCRETE_PORT_INSTANCES] previous[discretePortInstance] = {-1,0,-1,-1,-1};

const int[-1,NUM_OF_DISCRETE_PORT_INSTANCES] first[discretePortInstance] = {0,0,0,-1,-1};

const int[-1,NUM_OF_DISCRETE_PORT_INSTANCES] last[discretePortInstance] = {1,1,1,-1,-1};

const int[-1,NUM_OF_DISCRETE_PORT_INSTANCES] self[discretePortInstance] = {0,1,2,3,4};

const int[-1,MAX_NUM_OF_MESSAGE_BUFFERS_PER_ROLE-1] buffer_assignment[discretePortInstance][NUM_OF_MESSAGE_KINDS+1] = {{-1,-1,-1,-1,0},{-1,-1,-1,-1,0},{-1,-1,-1,-1,0},{-1,0,0,0,-1},{-1,0,0,0,-1}};

const int[-1,MAX_OF_BUFFER_AND_CONNECTOR_SIZE] bufferSize[discretePortInstance][NUM_OF_MESSAGE_KINDS+1] = {{-1,-1,-1,-1,1},{-1,-1,-1,-1,1},{-1,-1,-1,-1,1},{-1,3,3,3,-1},{-1,3,3,3,-1}};

const int DISCARD_INCOMING = 0;

const int DISCARD_OLDEST = 1;

const int[-1,1] bufferOverflowStrategies[discretePortInstance][NUM_OF_MESSAGE_KINDS+1] = {{-1,-1,-1,-1,DISCARD_INCOMING},{-1,-1,-1,-1,DISCARD_INCOMING},{-1,-1,-1,-1,DISCARD_INCOMING},{-1,DISCARD_INCOMING,DISCARD_INCOMING,DISCARD_INCOMING,-1},{-1,DISCARD_INCOMING,DISCARD_INCOMING,DISCARD_INCOMING,-1}};

bool connectorOverflow;

int[0,35] intermediateLocationSemaphore;

Buffer buffers[discretePortInstance][MAX_NUM_OF_MESSAGE_BUFFERS_PER_ROLE];

Buffer connectors[discretePortInstance];

int earliest[discretePortInstance];

int latest[discretePortInstance];

clock transmissionTimes[discretePortInstance][CONNECTOR_SIZE];

const MessageKind nullMessageKind = 0, muml_request_47 = 1, muml_finished_50 = 2, muml_laneChanged_44 = 3, muml_answer_45 = 4;

const MessageId nullMessageId = 0;

const Message nullMessage = {nullMessageId,nullMessageKind,0};

MessageId freeIds[NUM_MAX_MESSAGES_IN_TRANSIT] = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25};

muml_request_47Parameters muml_request_47NullMessage;

muml_finished_50Parameters muml_finished_50NullMessage;

muml_laneChanged_44Parameters muml_laneChanged_44NullMessage;

muml_answer_45Parameters muml_answer_45NullMessage;

int[0,NUM_MAX_MESSAGES_IN_TRANSIT] muml_request_47Tail;

int[0,NUM_MAX_MESSAGES_IN_TRANSIT] muml_finished_50Tail;

int[0,NUM_MAX_MESSAGES_IN_TRANSIT] muml_laneChanged_44Tail;

int[0,NUM_MAX_MESSAGES_IN_TRANSIT] muml_answer_45Tail;

muml_request_47Parameters muml_request_47MessageArguments[NUM_MAX_MESSAGES_IN_TRANSIT];

muml_finished_50Parameters muml_finished_50MessageArguments[NUM_MAX_MESSAGES_IN_TRANSIT];

muml_laneChanged_44Parameters muml_laneChanged_44MessageArguments[NUM_MAX_MESSAGES_IN_TRANSIT];

muml_answer_45Parameters muml_answer_45MessageArguments[NUM_MAX_MESSAGES_IN_TRANSIT];

void add(Buffer &amp;buffer, Message message) {
	buffer.messages[buffer.tail] = message;
	buffer.tail++;
}

int getNumberOfElementsInBuffer(Buffer b) {
	return b.tail;
}

bool check(Buffer buffer, MessageKind mKind) {
	Message nextMessage = buffer.messages[0];
	return mKind != nullMessageKind and nextMessage.mType == mKind;
}

bool checkMessageInBuffer(Buffer buffer, MessageKind mKind) {
	int i;
	for(i = 0; i &lt; MAX_OF_BUFFER_AND_CONNECTOR_SIZE; i++) 
		if(buffer.messages[i].mType == mKind) 
			return true; 
	return false;
}

void remove(Buffer &amp;buffer, MessageKind m) {
	if(check(buffer, m)) {
		int i;
		for(i = 0; i &lt; MAX_OF_BUFFER_AND_CONNECTOR_SIZE-1; i++) 
			buffer.messages[i] = buffer.messages[i+1];
		buffer.messages[MAX_OF_BUFFER_AND_CONNECTOR_SIZE-1] = nullMessage;
		buffer.tail--;
	} 
}

bool receive(discretePortInstance receiver, MessageKind mKind) {
	return check(buffers[receiver][buffer_assignment[receiver][mKind]], mKind);
}

MessageId requestId() {
	int i;
	for(i = 0; i &lt; NUM_MAX_MESSAGES_IN_TRANSIT; i++) 
		if(freeIds[i] != nullMessageId) {
		MessageId result;
		result = freeIds[i];
		freeIds[i] = nullMessageId;
		return result;
	} 
	return nullMessageId;
}

bool releaseId(MessageId id) {
	int i;
	for(i = 0; i &lt; NUM_MAX_MESSAGES_IN_TRANSIT; i++) 
		if(freeIds[i] == id) 
			return false; 
	for(i = 0; i &lt; NUM_MAX_MESSAGES_IN_TRANSIT; i++) 
		if(freeIds[i] == nullMessageId) {
		freeIds[i] = id;
		return true;
	} 
	return false;
}

int addmuml_request_47Arguments(muml_request_47Parameters m) {
	muml_request_47MessageArguments[muml_request_47Tail] = m;
	muml_request_47Tail++;
	return muml_request_47Tail-1;
}

int addmuml_finished_50Arguments(muml_finished_50Parameters m) {
	muml_finished_50MessageArguments[muml_finished_50Tail] = m;
	muml_finished_50Tail++;
	return muml_finished_50Tail-1;
}

int addmuml_laneChanged_44Arguments(muml_laneChanged_44Parameters m) {
	muml_laneChanged_44MessageArguments[muml_laneChanged_44Tail] = m;
	muml_laneChanged_44Tail++;
	return muml_laneChanged_44Tail-1;
}

int addmuml_answer_45Arguments(muml_answer_45Parameters m) {
	muml_answer_45MessageArguments[muml_answer_45Tail] = m;
	muml_answer_45Tail++;
	return muml_answer_45Tail-1;
}

bool removemuml_request_47Arguments(MessageId mId) {
	int i;
	for(i = 0; i &lt; NUM_MAX_MESSAGES_IN_TRANSIT; i++) {
		if(muml_request_47MessageArguments[i].muml_request_47MessageID == mId) {
			int j;
			for(j = i+1; j &lt; NUM_MAX_MESSAGES_IN_TRANSIT; j++) 
				muml_request_47MessageArguments[j-1] = muml_request_47MessageArguments[j];
			muml_request_47MessageArguments[NUM_MAX_MESSAGES_IN_TRANSIT-1] = muml_request_47NullMessage;
			muml_request_47Tail--;
			return true;
		} 
	}
	return false;
}

bool removemuml_finished_50Arguments(MessageId mId) {
	int i;
	for(i = 0; i &lt; NUM_MAX_MESSAGES_IN_TRANSIT; i++) {
		if(muml_finished_50MessageArguments[i].muml_finished_50MessageID == mId) {
			int j;
			for(j = i+1; j &lt; NUM_MAX_MESSAGES_IN_TRANSIT; j++) 
				muml_finished_50MessageArguments[j-1] = muml_finished_50MessageArguments[j];
			muml_finished_50MessageArguments[NUM_MAX_MESSAGES_IN_TRANSIT-1] = muml_finished_50NullMessage;
			muml_finished_50Tail--;
			return true;
		} 
	}
	return false;
}

bool removemuml_laneChanged_44Arguments(MessageId mId) {
	int i;
	for(i = 0; i &lt; NUM_MAX_MESSAGES_IN_TRANSIT; i++) {
		if(muml_laneChanged_44MessageArguments[i].muml_laneChanged_44MessageID == mId) {
			int j;
			for(j = i+1; j &lt; NUM_MAX_MESSAGES_IN_TRANSIT; j++) 
				muml_laneChanged_44MessageArguments[j-1] = muml_laneChanged_44MessageArguments[j];
			muml_laneChanged_44MessageArguments[NUM_MAX_MESSAGES_IN_TRANSIT-1] = muml_laneChanged_44NullMessage;
			muml_laneChanged_44Tail--;
			return true;
		} 
	}
	return false;
}

bool removemuml_answer_45Arguments(MessageId mId) {
	int i;
	for(i = 0; i &lt; NUM_MAX_MESSAGES_IN_TRANSIT; i++) {
		if(muml_answer_45MessageArguments[i].muml_answer_45MessageID == mId) {
			int j;
			for(j = i+1; j &lt; NUM_MAX_MESSAGES_IN_TRANSIT; j++) 
				muml_answer_45MessageArguments[j-1] = muml_answer_45MessageArguments[j];
			muml_answer_45MessageArguments[NUM_MAX_MESSAGES_IN_TRANSIT-1] = muml_answer_45NullMessage;
			muml_answer_45Tail--;
			return true;
		} 
	}
	return false;
}

void sendmuml_request_47(discretePortInstance sender, MUMLByte muml_speed_48_1) {
	if(connectors[sender].tail &lt; CONNECTOR_SIZE) {
		muml_request_47Parameters muml_request_47Instance = {nullMessageId,muml_speed_48_1};
		Message message = nullMessage;
		MessageId mId = nullMessageId;
		mId = requestId();
		muml_request_47Instance.muml_request_47MessageID = mId;
		message.mId = mId;
		message.mType = muml_request_47;
		message.mArgsPosition = addmuml_request_47Arguments(muml_request_47Instance);
		add(connectors[sender], message);
		transmissionTimes[sender][latest[sender]] = 0;
		latest[sender] == CONNECTOR_SIZE-1 ? (latest[sender] = 0) : latest[sender]++;
	} 
	else 
		connectorOverflow = true;
}

void sendmuml_finished_50(discretePortInstance sender) {
	if(connectors[sender].tail &lt; CONNECTOR_SIZE) {
		muml_finished_50Parameters muml_finished_50Instance = {nullMessageId};
		Message message = nullMessage;
		MessageId mId = nullMessageId;
		mId = requestId();
		muml_finished_50Instance.muml_finished_50MessageID = mId;
		message.mId = mId;
		message.mType = muml_finished_50;
		message.mArgsPosition = addmuml_finished_50Arguments(muml_finished_50Instance);
		add(connectors[sender], message);
		transmissionTimes[sender][latest[sender]] = 0;
		latest[sender] == CONNECTOR_SIZE-1 ? (latest[sender] = 0) : latest[sender]++;
	} 
	else 
		connectorOverflow = true;
}

void sendmuml_laneChanged_44(discretePortInstance sender) {
	if(connectors[sender].tail &lt; CONNECTOR_SIZE) {
		muml_laneChanged_44Parameters muml_laneChanged_44Instance = {nullMessageId};
		Message message = nullMessage;
		MessageId mId = nullMessageId;
		mId = requestId();
		muml_laneChanged_44Instance.muml_laneChanged_44MessageID = mId;
		message.mId = mId;
		message.mType = muml_laneChanged_44;
		message.mArgsPosition = addmuml_laneChanged_44Arguments(muml_laneChanged_44Instance);
		add(connectors[sender], message);
		transmissionTimes[sender][latest[sender]] = 0;
		latest[sender] == CONNECTOR_SIZE-1 ? (latest[sender] = 0) : latest[sender]++;
	} 
	else 
		connectorOverflow = true;
}

void sendmuml_answer_45(discretePortInstance sender, bool muml_accept_46_2) {
	if(connectors[sender].tail &lt; CONNECTOR_SIZE) {
		muml_answer_45Parameters muml_answer_45Instance = {nullMessageId,muml_accept_46_2};
		Message message = nullMessage;
		MessageId mId = nullMessageId;
		mId = requestId();
		muml_answer_45Instance.muml_answer_45MessageID = mId;
		message.mId = mId;
		message.mType = muml_answer_45;
		message.mArgsPosition = addmuml_answer_45Arguments(muml_answer_45Instance);
		add(connectors[sender], message);
		transmissionTimes[sender][latest[sender]] = 0;
		latest[sender] == CONNECTOR_SIZE-1 ? (latest[sender] = 0) : latest[sender]++;
	} 
	else 
		connectorOverflow = true;
}

void consume(discretePortInstance receiver, MessageKind mKind) {
	if(receive(receiver, mKind)) {
		Message nextMessage = buffers[receiver][buffer_assignment[receiver][mKind]].messages[0];
		releaseId(nextMessage.mId);
		remove(buffers[receiver][buffer_assignment[receiver][mKind]], mKind);
		if(mKind == muml_request_47) 
				removemuml_request_47Arguments(nextMessage.mId); 
		if(mKind == muml_finished_50) 
				removemuml_finished_50Arguments(nextMessage.mId); 
		if(mKind == muml_laneChanged_44) 
				removemuml_laneChanged_44Arguments(nextMessage.mId); 
		if(mKind == muml_answer_45) 
				removemuml_answer_45Arguments(nextMessage.mId); 
	} 
}

void clearConnector(MessageId id, MessageKind messageTypeToDiscard) {
	releaseId(id);
	if(messageTypeToDiscard == muml_request_47) 
			removemuml_request_47Arguments(id); 
	if(messageTypeToDiscard == muml_finished_50) 
			removemuml_finished_50Arguments(id); 
	if(messageTypeToDiscard == muml_laneChanged_44) 
			removemuml_laneChanged_44Arguments(id); 
	if(messageTypeToDiscard == muml_answer_45) 
			removemuml_answer_45Arguments(id); 
}

void discard(Buffer &amp;buffer, int bufferOverflowStrategy, Message message) {
	MessageId messageToDiscard = message.mId;
	MessageKind messageTypeToDiscard = message.mType;
	if(bufferOverflowStrategy == DISCARD_OLDEST) {
		messageToDiscard = buffer.messages[0].mId;
		messageTypeToDiscard = buffer.messages[0].mType;
		remove(buffer, messageTypeToDiscard);
		buffer.messages[buffer.tail] = message;
		buffer.tail++;
	} 
	releaseId(messageToDiscard);
	buffer.messageDiscarded = true;
	clearConnector(messageToDiscard, messageTypeToDiscard);
}

MUMLByte muml_speed_62_3[discretePortInstance] = {10,10,10,10,10};

bool muml_allAccept_63_4[discretePortInstance] = {true,true,true,true,true};

clock muml_c_95_5[discretePortInstance];

clock muml_DLC_multicast_1_77_6[discretePortInstance];

urgent chan muml_multicast1_87[discretePortInstance][discretePortInstance];

urgent chan muml_multicastDone1_88[discretePortInstance];

urgent chan muml_multicastDone2_90[discretePortInstance];

urgent chan muml_multiReceive1_91[discretePortInstance][discretePortInstance];

urgent chan muml_multiReceiveDone1_92[discretePortInstance];

urgent chan muml_multicast3_93[discretePortInstance][discretePortInstance];

urgent chan muml_multicastDone3_94[discretePortInstance];

urgent chan exit_muml_Initial_60_9[componentInstance];

urgent chan exit_muml_Main_64_10[componentInstance];

urgent chan exit_muml_coordinator_65_11[componentInstance];

urgent chan exit_muml_subrole_78_12[componentInstance];

urgent chan muml_multicast2_89Urgent[discretePortInstance][discretePortInstance];

chan muml_multicast2_89NonUrgent[discretePortInstance][discretePortInstance];

bool muml_accepted_102_34[componentInstance];

clock muml_c_eval_108_35[componentInstance];

urgent chan exit_muml_Initial_100_15[componentInstance];

		</declaration>
<template>
<name>Connector</name>
<parameter>
const discretePortInstance sender, const discretePortInstance receiver, const int min, const int max, const bool loss
</parameter>
<declaration>
Message tmp;

</declaration>	
<location id="Idle_Connector" x="89" y="150" >
	<name>Idle</name>
	<label kind="invariant">connectors[sender].tail &gt; 0 imply transmissionTimes[sender][earliest[sender]] &lt;= max</label>
</location>
<location id="transfer_loc_Connector" x="89" y="30" >
	<name>transfer_loc</name>
	<committed/>
</location>
<init ref="Idle_Connector"/>
<transition>
<source ref="Idle_Connector"/>
<target ref="transfer_loc_Connector"/>
<label kind="select">i : MessageKind</label>
<label kind="guard">check(connectors[sender], i) and transmissionTimes[sender][earliest[sender]] &gt;= min and transmissionTimes[sender][earliest[sender]] &lt;= max and not intermediateLocationSemaphore</label>
<label kind="assignment">
tmp = connectors[sender].messages[0],
remove(connectors[sender], i),
earliest[sender] == CONNECTOR_SIZE-1 ? (earliest[sender] = 0) : earliest[sender]++
</label>
<nail x="62" y="125"/>
<nail x="56" y="111"/>
<nail x="54" y="92"/>
<nail x="57" y="75"/>
</transition>
<transition>
<source ref="transfer_loc_Connector"/>
<target ref="Idle_Connector"/>
<label kind="select"></label>
<label kind="guard">buffers[receiver][buffer_assignment[receiver][tmp.mType]].tail &lt; bufferSize[receiver][tmp.mType] and not intermediateLocationSemaphore</label>
<label kind="assignment">
add(buffers[receiver][buffer_assignment[receiver][tmp.mType]], tmp)
</label>
<nail x="80" y="59"/>
<nail x="78" y="73"/>
<nail x="78" y="88"/>
<nail x="78" y="103"/>
</transition>
<transition>
<source ref="transfer_loc_Connector"/>
<target ref="Idle_Connector"/>
<label kind="select"></label>
<label kind="guard">buffers[receiver][buffer_assignment[receiver][tmp.mType]].tail &gt;= bufferSize[receiver][tmp.mType] and not intermediateLocationSemaphore</label>
<label kind="assignment">
discard(buffers[receiver][buffer_assignment[receiver][tmp.mType]], bufferOverflowStrategies[receiver][tmp.mType], tmp)
</label>
<nail x="118" y="58"/>
<nail x="123" y="73"/>
<nail x="125" y="92"/>
<nail x="121" y="109"/>
</transition>
<transition>
<source ref="transfer_loc_Connector"/>
<target ref="Idle_Connector"/>
<label kind="select"></label>
<label kind="guard">loss == true and not intermediateLocationSemaphore</label>
<label kind="assignment">
releaseId(tmp.mType),
clearConnector(tmp.mId, tmp.mType)
</label>
<nail x="99" y="59"/>
<nail x="101" y="73"/>
<nail x="101" y="88"/>
<nail x="100" y="103"/>
</transition>
</template>
<template>
<name>muml_OvertakerCompRTSC_59_13</name>
<parameter>
const componentInstance componentInstanceID
</parameter>
<declaration>
Message msg;

</declaration>	
<location id="muml_OvertakerCompRTSC_59_IDLE_muml_OvertakerCompRTSC_59_13" x="1114" y="30" >
	<name>muml_OvertakerCompRTSC_59_IDLE</name>
</location>
<location id="muml_Initial_60_ACTIVE_IN_muml_OvertakerCompRTSC_59_muml_OvertakerCompRTSC_59_13" x="411" y="30" >
	<name>muml_Initial_60_ACTIVE_IN_muml_OvertakerCompRTSC_59</name>
</location>
<init ref="muml_Initial_60_ACTIVE_IN_muml_OvertakerCompRTSC_59_muml_OvertakerCompRTSC_59_13"/>
</template>
<template>
<name>muml_overtaker_Role_61_6</name>
<parameter>
const componentInstance componentInstanceID, const discretePortInstance discretePortInstanceID
</parameter>
<declaration>
Message msg;

</declaration>	
<location id="muml_overtaker_Role_61_IDLE_muml_overtaker_Role_61_6" x="973" y="30" >
	<name>muml_overtaker_Role_61_IDLE</name>
</location>
<location id="muml_Main_64_ACTIVE_IN_muml_overtaker_Role_61_muml_overtaker_Role_61_6" x="363" y="30" >
	<name>muml_Main_64_ACTIVE_IN_muml_overtaker_Role_61</name>
</location>
<init ref="muml_Main_64_ACTIVE_IN_muml_overtaker_Role_61_muml_overtaker_Role_61_6"/>
</template>
<template>
<name>muml_coordinator_65_7</name>
<parameter>
const componentInstance componentInstanceID, const discretePortInstance discretePortInstanceID
</parameter>
<declaration>
Message msg;

</declaration>	
<location id="muml_coordinator_65_IDLE_muml_coordinator_65_7" x="1920" y="2310" >
	<name>muml_coordinator_65_IDLE</name>
</location>
<location id="muml_Intermediate_Node3_66_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="780" y="1830" >
	<name>muml_Intermediate_Node3_66_ACTIVE_IN_muml_coordinator_65</name>
	<urgent/>
</location>
<location id="muml_Intermediate2_67_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="780" y="1590" >
	<name>muml_Intermediate2_67_ACTIVE_IN_muml_coordinator_65</name>
</location>
<location id="muml_Changed_68_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="830" y="2070" >
	<name>muml_Changed_68_ACTIVE_IN_muml_coordinator_65</name>
	<label kind="invariant">muml_c_95_5[discretePortInstanceID] &lt;= 20*1000</label>
</location>
<location id="muml_Init_Intermediate_1_Changed_1_69_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="1190" y="2310" >
	<name>muml_Init_Intermediate_1_Changed_1_69_ACTIVE_IN_muml_coordinator_65</name>
	<label kind="invariant">muml_DLC_multicast_1_77_6[discretePortInstanceID] &lt;= 4500 and muml_c_95_5[discretePortInstanceID] &lt;= 20*1000</label>
</location>
<location id="muml_Init_70_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="807" y="150" >
	<name>muml_Init_70_ACTIVE_IN_muml_coordinator_65</name>
	<label kind="invariant">muml_c_95_5[discretePortInstanceID] &lt;= 20*1000</label>
</location>
<location id="muml_Idle_71_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="780" y="1350" >
	<name>muml_Idle_71_ACTIVE_IN_muml_coordinator_65</name>
</location>
<location id="muml_AnalyzeResult_72_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="730" y="390" >
	<name>muml_AnalyzeResult_72_ACTIVE_IN_muml_coordinator_65</name>
</location>
<location id="muml_Idle_Intermediate_1_WaitingForAnswer_2_73_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="570" y="1110" >
	<name>muml_Idle_Intermediate_1_WaitingForAnswer_2_73_ACTIVE_IN_muml_coordinator_65</name>
</location>
<location id="muml_WaitingForAnswer_74_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="679" y="870" >
	<name>muml_WaitingForAnswer_74_ACTIVE_IN_muml_coordinator_65</name>
	<label kind="invariant">muml_c_95_5[discretePortInstanceID] &lt;= (4+2*1)*1000</label>
</location>
<location id="muml_Intermediate_1_76_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7" x="710" y="630" >
	<name>muml_Intermediate_1_76_ACTIVE_IN_muml_coordinator_65</name>
</location>
<location id="INTERMEDIATE_7_muml_coordinator_65_7" x="797" y="1950" color="#ffffff">
	<name>INTERMEDIATE_7</name>
	<committed/>
</location>
<location id="INTERMEDIATE_8_muml_coordinator_65_7" x="780" y="1710" color="#ffffff">
	<name>INTERMEDIATE_8</name>
	<committed/>
</location>
<location id="INTERMEDIATE_9_muml_coordinator_65_7" x="780" y="1470" color="#ffffff">
	<name>INTERMEDIATE_9</name>
	<committed/>
</location>
<location id="INTERMEDIATE_10_muml_coordinator_65_7" x="950" y="2190" color="#ffffff">
	<name>INTERMEDIATE_10</name>
	<committed/>
</location>
<location id="INTERMEDIATE_11_muml_coordinator_65_7" x="1034" y="30" color="#ffffff">
	<name>INTERMEDIATE_11</name>
	<committed/>
</location>
<location id="INTERMEDIATE_12_muml_coordinator_65_7" x="730" y="270" color="#ffffff">
	<name>INTERMEDIATE_12</name>
	<committed/>
</location>
<location id="INTERMEDIATE_13_muml_coordinator_65_7" x="1064" y="270" color="#ffffff">
	<name>INTERMEDIATE_13</name>
	<committed/>
</location>
<location id="INTERMEDIATE_14_muml_coordinator_65_7" x="670" y="1230" color="#ffffff">
	<name>INTERMEDIATE_14</name>
	<committed/>
</location>
<location id="INTERMEDIATE_15_muml_coordinator_65_7" x="724" y="510" color="#ffffff">
	<name>INTERMEDIATE_15</name>
	<committed/>
</location>
<location id="INTERMEDIATE_16_muml_coordinator_65_7" x="642" y="990" color="#ffffff">
	<name>INTERMEDIATE_16</name>
	<committed/>
</location>
<location id="INTERMEDIATE_17_muml_coordinator_65_7" x="685" y="750" color="#ffffff">
	<name>INTERMEDIATE_17</name>
	<committed/>
</location>
<init ref="muml_Idle_71_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<transition>
<source ref="muml_Changed_68_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_7_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="822" y="2039"/>
<nail x="818" y="2026"/>
<nail x="814" y="2010"/>
<nail x="810" y="1996"/>
</transition>
<transition>
<source ref="muml_Intermediate_Node3_66_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_8_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast3_93[discretePortInstanceID][first[discretePortInstanceID]]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="780" y="1799"/>
<nail x="780" y="1786"/>
<nail x="780" y="1771"/>
<nail x="780" y="1756"/>
</transition>
<transition>
<source ref="muml_Intermediate2_67_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_9_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicastDone3_94[discretePortInstanceID]?</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="780" y="1559"/>
<nail x="780" y="1546"/>
<nail x="780" y="1531"/>
<nail x="780" y="1516"/>
</transition>
<transition>
<source ref="muml_Init_Intermediate_1_Changed_1_69_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_10_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicastDone1_88[discretePortInstanceID]?</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="1132" y="2280"/>
<nail x="1098" y="2263"/>
<nail x="1056" y="2242"/>
<nail x="1020" y="2225"/>
</transition>
<transition>
<source ref="muml_Init_70_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_11_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast1_87[discretePortInstanceID][first[discretePortInstanceID]]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="861" y="120"/>
<nail x="893" y="104"/>
<nail x="933" y="83"/>
<nail x="967" y="66"/>
</transition>
<transition>
<source ref="muml_AnalyzeResult_72_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_12_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">muml_allAccept_63_4[discretePortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
muml_DLC_multicast_1_77_6[discretePortInstanceID] = 0,
muml_c_95_5[discretePortInstanceID] = 0,
intermediateLocationSemaphore++
</label>
<nail x="730" y="359"/>
<nail x="730" y="346"/>
<nail x="730" y="331"/>
<nail x="730" y="316"/>
</transition>
<transition>
<source ref="muml_AnalyzeResult_72_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_13_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not muml_allAccept_63_4[discretePortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="810" y="360"/>
<nail x="860" y="343"/>
<nail x="924" y="320"/>
<nail x="976" y="302"/>
</transition>
<transition>
<source ref="muml_Idle_71_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_14_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast2_89NonUrgent[discretePortInstanceID][first[discretePortInstanceID]]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="754" y="1320"/>
<nail x="740" y="1305"/>
<nail x="723" y="1287"/>
<nail x="708" y="1271"/>
</transition>
<transition>
<source ref="muml_Intermediate_1_76_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_15_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multiReceiveDone1_92[discretePortInstanceID]?</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="714" y="599"/>
<nail x="715" y="586"/>
<nail x="717" y="571"/>
<nail x="719" y="556"/>
</transition>
<transition>
<source ref="muml_Idle_Intermediate_1_WaitingForAnswer_2_73_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_16_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicastDone2_90[discretePortInstanceID]?</label>
<label kind="assignment">
muml_c_95_5[discretePortInstanceID] = 0,
muml_allAccept_63_4[discretePortInstanceID] = true,
intermediateLocationSemaphore++
</label>
<nail x="588" y="1079"/>
<nail x="596" y="1065"/>
<nail x="607" y="1049"/>
<nail x="616" y="1034"/>
</transition>
<transition>
<source ref="muml_WaitingForAnswer_74_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<target ref="INTERMEDIATE_17_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multiReceive1_91[discretePortInstanceID][first[discretePortInstanceID]]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="680" y="839"/>
<nail x="681" y="826"/>
<nail x="682" y="811"/>
<nail x="683" y="796"/>
</transition>
<transition>
<source ref="INTERMEDIATE_7_muml_coordinator_65_7"/>
<target ref="muml_Intermediate_Node3_66_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="793" y="1919"/>
<nail x="791" y="1906"/>
<nail x="789" y="1891"/>
<nail x="787" y="1876"/>
</transition>
<transition>
<source ref="INTERMEDIATE_8_muml_coordinator_65_7"/>
<target ref="muml_Intermediate2_67_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="780" y="1679"/>
<nail x="780" y="1666"/>
<nail x="780" y="1651"/>
<nail x="780" y="1636"/>
</transition>
<transition>
<source ref="INTERMEDIATE_9_muml_coordinator_65_7"/>
<target ref="muml_Idle_71_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="780" y="1439"/>
<nail x="780" y="1426"/>
<nail x="780" y="1411"/>
<nail x="780" y="1396"/>
</transition>
<transition>
<source ref="INTERMEDIATE_10_muml_coordinator_65_7"/>
<target ref="muml_Changed_68_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="921" y="2160"/>
<nail x="906" y="2145"/>
<nail x="888" y="2127"/>
<nail x="872" y="2111"/>
</transition>
<transition>
<source ref="INTERMEDIATE_11_muml_coordinator_65_7"/>
<target ref="muml_Init_Intermediate_1_Changed_1_69_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="1088" y="58"/>
<nail x="1156" y="94"/>
<nail x="1262" y="168"/>
<nail x="1262" y="268"/>
<nail x="1262" y="2071"/>
<nail x="1262" y="2071"/>
<nail x="1262" y="2071"/>
<nail x="1262" y="2141"/>
<nail x="1233" y="2217"/>
<nail x="1212" y="2264"/>
</transition>
<transition>
<source ref="INTERMEDIATE_12_muml_coordinator_65_7"/>
<target ref="muml_Init_70_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="749" y="240"/>
<nail x="758" y="226"/>
<nail x="769" y="209"/>
<nail x="779" y="194"/>
</transition>
<transition>
<source ref="INTERMEDIATE_13_muml_coordinator_65_7"/>
<target ref="muml_Idle_71_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="1095" y="300"/>
<nail x="1112" y="316"/>
<nail x="1131" y="337"/>
<nail x="1144" y="360"/>
<nail x="1178" y="419"/>
<nail x="1189" y="439"/>
<nail x="1189" y="508"/>
<nail x="1189" y="1111"/>
<nail x="1189" y="1111"/>
<nail x="1189" y="1111"/>
<nail x="1189" y="1228"/>
<nail x="1062" y="1288"/>
<nail x="949" y="1319"/>
</transition>
<transition>
<source ref="INTERMEDIATE_14_muml_coordinator_65_7"/>
<target ref="muml_Idle_Intermediate_1_WaitingForAnswer_2_73_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="646" y="1200"/>
<nail x="634" y="1186"/>
<nail x="619" y="1168"/>
<nail x="606" y="1153"/>
</transition>
<transition>
<source ref="INTERMEDIATE_15_muml_coordinator_65_7"/>
<target ref="muml_AnalyzeResult_72_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="725" y="479"/>
<nail x="726" y="466"/>
<nail x="727" y="451"/>
<nail x="728" y="436"/>
</transition>
<transition>
<source ref="INTERMEDIATE_16_muml_coordinator_65_7"/>
<target ref="muml_WaitingForAnswer_74_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="651" y="959"/>
<nail x="655" y="946"/>
<nail x="660" y="930"/>
<nail x="665" y="916"/>
</transition>
<transition>
<source ref="INTERMEDIATE_17_muml_coordinator_65_7"/>
<target ref="muml_Intermediate_1_76_ACTIVE_IN_muml_coordinator_65_muml_coordinator_65_7"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="692" y="719"/>
<nail x="694" y="706"/>
<nail x="698" y="691"/>
<nail x="701" y="676"/>
</transition>
</template>
<template>
<name>muml_subrole_78_8</name>
<parameter>
const componentInstance componentInstanceID, const discretePortInstance discretePortInstanceID, const discretePortInstance discreteSubPortInstanceID
</parameter>
<declaration>
Message msg;

</declaration>	
<location id="muml_subrole_78_IDLE_muml_subrole_78_8" x="2051" y="750" >
	<name>muml_subrole_78_IDLE</name>
</location>
<location id="muml_WaitingForAnswer_Intermediate_1_AnalyzeResult_81_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8" x="2589" y="390" >
	<name>muml_WaitingForAnswer_Intermediate_1_AnalyzeResult_81_ACTIVE_IN_muml_subrole_78</name>
	<urgent/>
</location>
<location id="muml_WaitingForAnswer_Intermediate_2_AnalyzeResult_82_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8" x="3109" y="150" >
	<name>muml_WaitingForAnswer_Intermediate_2_AnalyzeResult_82_ACTIVE_IN_muml_subrole_78</name>
	<urgent/>
</location>
<location id="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8" x="3069" y="630" >
	<name>muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78</name>
</location>
<location id="muml_Init_Intermediate_1_Changed_84_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8" x="464" y="390" >
	<name>muml_Init_Intermediate_1_Changed_84_ACTIVE_IN_muml_subrole_78</name>
	<urgent/>
</location>
<location id="muml_Intermediate_Node1_85_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8" x="1494" y="390" >
	<name>muml_Intermediate_Node1_85_ACTIVE_IN_muml_subrole_78</name>
	<urgent/>
</location>
<location id="muml_Idle_Intermediate_1_WaitingForAnswer_86_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8" x="3804" y="390" >
	<name>muml_Idle_Intermediate_1_WaitingForAnswer_86_ACTIVE_IN_muml_subrole_78</name>
	<urgent/>
</location>
<location id="INTERMEDIATE_18_muml_subrole_78_8" x="2749" y="510" color="#ffffff">
	<name>INTERMEDIATE_18</name>
	<committed/>
</location>
<location id="INTERMEDIATE_19_muml_subrole_78_8" x="2601" y="270" color="#ffffff">
	<name>INTERMEDIATE_19</name>
	<committed/>
</location>
<location id="INTERMEDIATE_20_muml_subrole_78_8" x="2948" y="270" color="#ffffff">
	<name>INTERMEDIATE_20</name>
	<committed/>
</location>
<location id="INTERMEDIATE_21_muml_subrole_78_8" x="3753" y="30" color="#ffffff">
	<name>INTERMEDIATE_21</name>
	<committed/>
</location>
<location id="INTERMEDIATE_22_muml_subrole_78_8" x="4408" y="30" color="#ffffff">
	<name>INTERMEDIATE_22</name>
	<committed/>
</location>
<location id="INTERMEDIATE_23_muml_subrole_78_8" x="759" y="270" color="#ffffff">
	<name>INTERMEDIATE_23</name>
	<committed/>
</location>
<location id="INTERMEDIATE_24_muml_subrole_78_8" x="1701" y="750" color="#ffffff">
	<name>INTERMEDIATE_24</name>
	<committed/>
</location>
<location id="INTERMEDIATE_25_muml_subrole_78_8" x="1213" y="270" color="#ffffff">
	<name>INTERMEDIATE_25</name>
	<committed/>
</location>
<location id="INTERMEDIATE_26_muml_subrole_78_8" x="1721" y="270" color="#ffffff">
	<name>INTERMEDIATE_26</name>
	<committed/>
</location>
<location id="INTERMEDIATE_27_muml_subrole_78_8" x="3473" y="270" color="#ffffff">
	<name>INTERMEDIATE_27</name>
	<committed/>
</location>
<location id="INTERMEDIATE_28_muml_subrole_78_8" x="4284" y="270" color="#ffffff">
	<name>INTERMEDIATE_28</name>
	<committed/>
</location>
<location id="INTERMEDIATE_29_muml_subrole_78_8" x="3903" y="270" color="#ffffff">
	<name>INTERMEDIATE_29</name>
	<committed/>
</location>
<location id="INTERMEDIATE_30_muml_subrole_78_8" x="1623" y="510" color="#ffffff">
	<name>INTERMEDIATE_30</name>
	<committed/>
</location>
<location id="INTERMEDIATE_31_muml_subrole_78_8" x="721" y="510" color="#ffffff">
	<name>INTERMEDIATE_31</name>
	<committed/>
</location>
<location id="INTERMEDIATE_32_muml_subrole_78_8" x="3438" y="510" color="#ffffff">
	<name>INTERMEDIATE_32</name>
	<committed/>
</location>
<location id="INTERMEDIATE_33_muml_subrole_78_8" x="3793" y="510" color="#ffffff">
	<name>INTERMEDIATE_33</name>
	<committed/>
</location>
<init ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<transition>
<source ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_18_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multiReceive1_91[discretePortInstanceID][self[discreteSubPortInstanceID]]?</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="2993" y="600"/>
<nail x="2945" y="583"/>
<nail x="2883" y="560"/>
<nail x="2834" y="542"/>
</transition>
<transition>
<source ref="muml_WaitingForAnswer_Intermediate_1_AnalyzeResult_81_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_19_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">receive(discreteSubPortInstanceID, muml_answer_45) and not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
msg = buffers[discreteSubPortInstanceID][buffer_assignment[discreteSubPortInstanceID][muml_answer_45]].messages[0],
muml_allAccept_63_4[discretePortInstanceID] = (muml_allAccept_63_4[discretePortInstanceID] and muml_answer_45MessageArguments[msg.mArgsPosition].muml_accept_46_0),
consume(discreteSubPortInstanceID, muml_answer_45),
intermediateLocationSemaphore++
</label>
<nail x="2592" y="359"/>
<nail x="2593" y="346"/>
<nail x="2595" y="331"/>
<nail x="2596" y="316"/>
</transition>
<transition>
<source ref="muml_WaitingForAnswer_Intermediate_1_AnalyzeResult_81_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_20_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
muml_allAccept_63_4[discretePortInstanceID] = false,
intermediateLocationSemaphore++
</label>
<nail x="2676" y="360"/>
<nail x="2730" y="342"/>
<nail x="2801" y="319"/>
<nail x="2856" y="301"/>
</transition>
<transition>
<source ref="muml_WaitingForAnswer_Intermediate_2_AnalyzeResult_82_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_21_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">self[discreteSubPortInstanceID] == last[discreteSubPortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multiReceiveDone1_92[discretePortInstanceID]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="3260" y="120"/>
<nail x="3372" y="100"/>
<nail x="3523" y="73"/>
<nail x="3628" y="54"/>
</transition>
<transition>
<source ref="muml_WaitingForAnswer_Intermediate_2_AnalyzeResult_82_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_22_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">self[discreteSubPortInstanceID] != last[discreteSubPortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multiReceive1_91[discretePortInstanceID][next[self[discreteSubPortInstanceID]]]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="3386" y="123"/>
<nail x="3652" y="99"/>
<nail x="4043" y="64"/>
<nail x="4256" y="45"/>
</transition>
<transition>
<source ref="muml_Init_Intermediate_1_Changed_84_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_23_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">self[discreteSubPortInstanceID] != last[discreteSubPortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast1_87[discretePortInstanceID][next[self[discreteSubPortInstanceID]]]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="536" y="360"/>
<nail x="579" y="343"/>
<nail x="634" y="321"/>
<nail x="679" y="303"/>
</transition>
<transition>
<source ref="muml_Init_Intermediate_1_Changed_84_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_24_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">self[discreteSubPortInstanceID] == last[discreteSubPortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicastDone1_88[discretePortInstanceID]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="473" y="420"/>
<nail x="486" y="454"/>
<nail x="512" y="510"/>
<nail x="554" y="540"/>
<nail x="713" y="649"/>
<nail x="1271" y="711"/>
<nail x="1546" y="735"/>
</transition>
<transition>
<source ref="muml_Intermediate_Node1_85_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_25_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">self[discreteSubPortInstanceID] != last[discreteSubPortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast3_93[discretePortInstanceID][next[self[discreteSubPortInstanceID]]]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="1427" y="360"/>
<nail x="1386" y="343"/>
<nail x="1333" y="321"/>
<nail x="1290" y="303"/>
</transition>
<transition>
<source ref="muml_Intermediate_Node1_85_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_26_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">self[discreteSubPortInstanceID] == last[discreteSubPortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicastDone3_94[discretePortInstanceID]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="1549" y="360"/>
<nail x="1581" y="343"/>
<nail x="1621" y="323"/>
<nail x="1654" y="306"/>
</transition>
<transition>
<source ref="muml_Idle_Intermediate_1_WaitingForAnswer_86_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_27_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">self[discreteSubPortInstanceID] == last[discreteSubPortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicastDone2_90[discretePortInstanceID]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="3724" y="360"/>
<nail x="3675" y="342"/>
<nail x="3610" y="320"/>
<nail x="3559" y="302"/>
</transition>
<transition>
<source ref="muml_Idle_Intermediate_1_WaitingForAnswer_86_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_28_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">self[discreteSubPortInstanceID] != last[discreteSubPortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast2_89Urgent[discretePortInstanceID][next[self[discreteSubPortInstanceID]]]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="3918" y="360"/>
<nail x="3996" y="341"/>
<nail x="4099" y="316"/>
<nail x="4176" y="298"/>
</transition>
<transition>
<source ref="muml_Idle_Intermediate_1_WaitingForAnswer_86_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_29_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">self[discreteSubPortInstanceID] != last[discreteSubPortInstanceID] and not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast2_89NonUrgent[discretePortInstanceID][next[self[discreteSubPortInstanceID]]]!</label>
<label kind="assignment">
intermediateLocationSemaphore++
</label>
<nail x="3828" y="359"/>
<nail x="3840" y="345"/>
<nail x="3855" y="328"/>
<nail x="3868" y="313"/>
</transition>
<transition>
<source ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_30_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast3_93[discretePortInstanceID][self[discreteSubPortInstanceID]]?</label>
<label kind="assignment">
sendmuml_finished_50(discreteSubPortInstanceID),
intermediateLocationSemaphore++
</label>
<nail x="2793" y="608"/>
<nail x="2561" y="591"/>
<nail x="2222" y="565"/>
<nail x="1926" y="540"/>
<nail x="1876" y="535"/>
<nail x="1821" y="530"/>
<nail x="1772" y="526"/>
</transition>
<transition>
<source ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_31_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast1_87[discretePortInstanceID][self[discreteSubPortInstanceID]]?</label>
<label kind="assignment">
sendmuml_laneChanged_44(discreteSubPortInstanceID),
intermediateLocationSemaphore++
</label>
<nail x="2684" y="621"/>
<nail x="2260" y="611"/>
<nail x="1557" y="589"/>
<nail x="953" y="540"/>
<nail x="922" y="537"/>
<nail x="889" y="534"/>
<nail x="858" y="530"/>
</transition>
<transition>
<source ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_32_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast2_89Urgent[discretePortInstanceID][self[discreteSubPortInstanceID]]?</label>
<label kind="assignment">
sendmuml_request_47(discreteSubPortInstanceID, muml_speed_62_3[discretePortInstanceID]),
intermediateLocationSemaphore++
</label>
<nail x="3156" y="600"/>
<nail x="3213" y="582"/>
<nail x="3287" y="559"/>
<nail x="3344" y="541"/>
</transition>
<transition>
<source ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<target ref="INTERMEDIATE_33_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">muml_multicast2_89NonUrgent[discretePortInstanceID][self[discreteSubPortInstanceID]]?</label>
<label kind="assignment">
sendmuml_request_47(discreteSubPortInstanceID, muml_speed_62_3[discretePortInstanceID]),
intermediateLocationSemaphore++
</label>
<nail x="3230" y="602"/>
<nail x="3360" y="581"/>
<nail x="3541" y="552"/>
<nail x="3662" y="532"/>
</transition>
<transition>
<source ref="INTERMEDIATE_18_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_Intermediate_1_AnalyzeResult_81_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="2711" y="480"/>
<nail x="2691" y="465"/>
<nail x="2665" y="446"/>
<nail x="2642" y="430"/>
</transition>
<transition>
<source ref="INTERMEDIATE_19_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_Intermediate_2_AnalyzeResult_82_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="2696" y="246"/>
<nail x="2774" y="228"/>
<nail x="2884" y="203"/>
<nail x="2972" y="183"/>
</transition>
<transition>
<source ref="INTERMEDIATE_20_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_Intermediate_2_AnalyzeResult_82_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="2986" y="240"/>
<nail x="3007" y="225"/>
<nail x="3033" y="206"/>
<nail x="3056" y="190"/>
</transition>
<transition>
<source ref="INTERMEDIATE_21_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="3883" y="45"/>
<nail x="4098" y="72"/>
<nail x="4506" y="139"/>
<nail x="4506" y="268"/>
<nail x="4506" y="391"/>
<nail x="4506" y="391"/>
<nail x="4506" y="391"/>
<nail x="4506" y="502"/>
<nail x="4409" y="501"/>
<nail x="4304" y="540"/>
<nail x="4158" y="594"/>
<nail x="3779" y="615"/>
<nail x="3479" y="623"/>
</transition>
<transition>
<source ref="INTERMEDIATE_22_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="4443" y="59"/>
<nail x="4491" y="99"/>
<nail x="4569" y="179"/>
<nail x="4569" y="268"/>
<nail x="4569" y="391"/>
<nail x="4569" y="391"/>
<nail x="4569" y="391"/>
<nail x="4569" y="488"/>
<nail x="4498" y="501"/>
<nail x="4409" y="540"/>
<nail x="4323" y="577"/>
<nail x="3812" y="602"/>
<nail x="3447" y="616"/>
</transition>
<transition>
<source ref="INTERMEDIATE_23_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="826" y="297"/>
<nail x="863" y="312"/>
<nail x="908" y="334"/>
<nail x="944" y="360"/>
<nail x="1037" y="425"/>
<nail x="1021" y="494"/>
<nail x="1124" y="540"/>
<nail x="1260" y="599"/>
<nail x="2126" y="619"/>
<nail x="2655" y="625"/>
</transition>
<transition>
<source ref="INTERMEDIATE_24_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="1808" y="728"/>
<nail x="1828" y="725"/>
<nail x="1848" y="722"/>
<nail x="1868" y="720"/>
<nail x="2155" y="685"/>
<nail x="2484" y="662"/>
<nail x="2724" y="648"/>
</transition>
<transition>
<source ref="INTERMEDIATE_25_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="1143" y="297"/>
<nail x="1116" y="311"/>
<nail x="1087" y="331"/>
<nail x="1071" y="360"/>
<nail x="1058" y="383"/>
<nail x="1055" y="398"/>
<nail x="1071" y="420"/>
<nail x="1177" y="564"/>
<nail x="1280" y="508"/>
<nail x="1456" y="540"/>
<nail x="1682" y="580"/>
<nail x="2280" y="605"/>
<nail x="2681" y="618"/>
</transition>
<transition>
<source ref="INTERMEDIATE_26_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="1792" y="296"/>
<nail x="1830" y="312"/>
<nail x="1878" y="333"/>
<nail x="1918" y="360"/>
<nail x="1950" y="381"/>
<nail x="1947" y="402"/>
<nail x="1981" y="420"/>
<nail x="2209" y="537"/>
<nail x="2495" y="589"/>
<nail x="2716" y="611"/>
</transition>
<transition>
<source ref="INTERMEDIATE_27_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="3388" y="294"/>
<nail x="3347" y="309"/>
<nail x="3298" y="330"/>
<nail x="3261" y="360"/>
<nail x="3182" y="422"/>
<nail x="3121" y="525"/>
<nail x="3091" y="583"/>
</transition>
<transition>
<source ref="INTERMEDIATE_28_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="4326" y="299"/>
<nail x="4346" y="314"/>
<nail x="4367" y="335"/>
<nail x="4378" y="360"/>
<nail x="4388" y="384"/>
<nail x="4389" y="396"/>
<nail x="4378" y="420"/>
<nail x="4340" y="497"/>
<nail x="4305" y="508"/>
<nail x="4224" y="540"/>
<nail x="4091" y="591"/>
<nail x="3752" y="613"/>
<nail x="3475" y="622"/>
</transition>
<transition>
<source ref="INTERMEDIATE_29_muml_subrole_78_8"/>
<target ref="muml_WaitingForAnswer_83_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="4025" y="287"/>
<nail x="4149" y="305"/>
<nail x="4327" y="334"/>
<nail x="4348" y="360"/>
<nail x="4365" y="380"/>
<nail x="4363" y="398"/>
<nail x="4348" y="420"/>
<nail x="4245" y="558"/>
<nail x="3809" y="605"/>
<nail x="3474" y="621"/>
</transition>
<transition>
<source ref="INTERMEDIATE_30_muml_subrole_78_8"/>
<target ref="muml_Intermediate_Node1_85_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="1591" y="480"/>
<nail x="1575" y="465"/>
<nail x="1555" y="447"/>
<nail x="1538" y="431"/>
</transition>
<transition>
<source ref="INTERMEDIATE_31_muml_subrole_78_8"/>
<target ref="muml_Init_Intermediate_1_Changed_84_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="663" y="482"/>
<nail x="627" y="465"/>
<nail x="581" y="444"/>
<nail x="542" y="426"/>
</transition>
<transition>
<source ref="INTERMEDIATE_32_muml_subrole_78_8"/>
<target ref="muml_Idle_Intermediate_1_WaitingForAnswer_86_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="3514" y="484"/>
<nail x="3568" y="466"/>
<nail x="3641" y="443"/>
<nail x="3700" y="424"/>
</transition>
<transition>
<source ref="INTERMEDIATE_33_muml_subrole_78_8"/>
<target ref="muml_Idle_Intermediate_1_WaitingForAnswer_86_ACTIVE_IN_muml_subrole_78_muml_subrole_78_8"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="3795" y="479"/>
<nail x="3797" y="466"/>
<nail x="3798" y="451"/>
<nail x="3800" y="436"/>
</transition>
</template>
<template>
<name>muml_Main_64</name>
<parameter>
const componentInstance componentInstanceID, const discretePortInstance discretePortInstanceID
</parameter>
<declaration>
Message msg;

</declaration>	
<location id="muml_Main_64_IDLE_muml_Main_64" x="175" y="30" >
	<name>muml_Main_64_IDLE</name>
</location>
<location id="muml_Main_64_ACTIVE_muml_Main_64" x="175" y="150" >
	<name>muml_Main_64_ACTIVE</name>
</location>
<init ref="muml_Main_64_ACTIVE_muml_Main_64"/>
<transition>
<source ref="muml_Main_64_ACTIVE_muml_Main_64"/>
<target ref="muml_Main_64_IDLE_muml_Main_64"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">exit_muml_Main_64_10[componentInstanceID]?</label>
<label kind="assignment"></label>
<nail x="175" y="119"/>
<nail x="175" y="106"/>
<nail x="175" y="91"/>
<nail x="175" y="76"/>
</transition>
</template>
<template>
<name>muml_OvertakeeCompRTSC_99_16</name>
<parameter>
const componentInstance componentInstanceID
</parameter>
<declaration>
Message msg;

</declaration>	
<location id="muml_OvertakeeCompRTSC_99_IDLE_muml_OvertakeeCompRTSC_99_16" x="262" y="30" >
	<name>muml_OvertakeeCompRTSC_99_IDLE</name>
</location>
<location id="muml_Initial_100_ACTIVE_IN_muml_OvertakeeCompRTSC_99_muml_OvertakeeCompRTSC_99_16" x="973" y="30" >
	<name>muml_Initial_100_ACTIVE_IN_muml_OvertakeeCompRTSC_99</name>
</location>
<init ref="muml_Initial_100_ACTIVE_IN_muml_OvertakeeCompRTSC_99_muml_OvertakeeCompRTSC_99_16"/>
</template>
<template>
<name>muml_overtakee_Role_101_14</name>
<parameter>
const componentInstance componentInstanceID, const discretePortInstance discretePortInstanceID
</parameter>
<declaration>
Message msg;

</declaration>	
<location id="muml_overtakee_Role_101_IDLE_muml_overtakee_Role_101_14" x="842" y="990" >
	<name>muml_overtakee_Role_101_IDLE</name>
</location>
<location id="muml_NoBraking_103_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14" x="700" y="630" >
	<name>muml_NoBraking_103_ACTIVE_IN_muml_overtakee_Role_101</name>
</location>
<location id="muml_BrakingAllowed_104_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14" x="447" y="390" >
	<name>muml_BrakingAllowed_104_ACTIVE_IN_muml_overtakee_Role_101</name>
</location>
<location id="muml_Idle_105_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14" x="1075" y="150" >
	<name>muml_Idle_105_ACTIVE_IN_muml_overtakee_Role_101</name>
</location>
<location id="muml_EvaluatingRequest_106_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14" x="700" y="870" >
	<name>muml_EvaluatingRequest_106_ACTIVE_IN_muml_overtakee_Role_101</name>
	<label kind="invariant">muml_c_eval_108_35[componentInstanceID] &lt;= 3*1000</label>
</location>
<location id="INTERMEDIATE_36_muml_overtakee_Role_101_14" x="700" y="750" color="#ffffff">
	<name>INTERMEDIATE_36</name>
	<committed/>
</location>
<location id="INTERMEDIATE_37_muml_overtakee_Role_101_14" x="704" y="510" color="#ffffff">
	<name>INTERMEDIATE_37</name>
	<committed/>
</location>
<location id="INTERMEDIATE_38_muml_overtakee_Role_101_14" x="1075" y="390" color="#ffffff">
	<name>INTERMEDIATE_38</name>
	<committed/>
</location>
<location id="INTERMEDIATE_39_muml_overtakee_Role_101_14" x="370" y="510" color="#ffffff">
	<name>INTERMEDIATE_39</name>
	<committed/>
</location>
<location id="INTERMEDIATE_40_muml_overtakee_Role_101_14" x="662" y="270" color="#ffffff">
	<name>INTERMEDIATE_40</name>
	<committed/>
</location>
<location id="INTERMEDIATE_41_muml_overtakee_Role_101_14" x="435" y="990" color="#ffffff">
	<name>INTERMEDIATE_41</name>
	<committed/>
</location>
<location id="INTERMEDIATE_42_muml_overtakee_Role_101_14" x="1297" y="630" color="#ffffff">
	<name>INTERMEDIATE_42</name>
	<committed/>
</location>
<location id="INTERMEDIATE_43_muml_overtakee_Role_101_14" x="1285" y="30" color="#ffffff">
	<name>INTERMEDIATE_43</name>
	<committed/>
</location>
<init ref="muml_Idle_105_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<transition>
<source ref="muml_EvaluatingRequest_106_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<target ref="INTERMEDIATE_36_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="guard">muml_accepted_102_34[componentInstanceID] and not intermediateLocationSemaphore</label>
<label kind="assignment">
sendmuml_answer_45(discretePortInstanceID, true),
intermediateLocationSemaphore++
</label>
<nail x="700" y="839"/>
<nail x="700" y="826"/>
<nail x="700" y="811"/>
<nail x="700" y="796"/>
</transition>
<transition>
<source ref="muml_NoBraking_103_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<target ref="INTERMEDIATE_37_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="guard">receive(discretePortInstanceID, muml_laneChanged_44) and not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
msg = buffers[discretePortInstanceID][buffer_assignment[discretePortInstanceID][muml_laneChanged_44]].messages[0],
consume(discretePortInstanceID, muml_laneChanged_44),
intermediateLocationSemaphore++
</label>
<nail x="701" y="599"/>
<nail x="701" y="586"/>
<nail x="702" y="571"/>
<nail x="702" y="556"/>
</transition>
<transition>
<source ref="muml_NoBraking_103_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<target ref="INTERMEDIATE_38_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="guard">receive(discretePortInstanceID, muml_finished_50) and not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
msg = buffers[discretePortInstanceID][buffer_assignment[discretePortInstanceID][muml_finished_50]].messages[0],
consume(discretePortInstanceID, muml_finished_50),
intermediateLocationSemaphore++
</label>
<nail x="760" y="600"/>
<nail x="793" y="583"/>
<nail x="835" y="562"/>
<nail x="870" y="540"/>
<nail x="926" y="505"/>
<nail x="986" y="461"/>
<nail x="1026" y="430"/>
</transition>
<transition>
<source ref="muml_NoBraking_103_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<target ref="INTERMEDIATE_39_muml_overtakee_Role_101_14"/>
<label kind="select">choice_44 : int[0,1]</label>
<label kind="guard">receive(discretePortInstanceID, muml_request_47) and not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
muml_c_eval_108_35[componentInstanceID] = 0,
msg = buffers[discretePortInstanceID][buffer_assignment[discretePortInstanceID][muml_request_47]].messages[0],
muml_accepted_102_34[componentInstanceID] = choice_44,
consume(discretePortInstanceID, muml_request_47),
intermediateLocationSemaphore++
</label>
<nail x="622" y="600"/>
<nail x="572" y="583"/>
<nail x="508" y="560"/>
<nail x="457" y="542"/>
</transition>
<transition>
<source ref="muml_BrakingAllowed_104_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<target ref="INTERMEDIATE_40_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="guard">receive(discretePortInstanceID, muml_finished_50) and not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
msg = buffers[discretePortInstanceID][buffer_assignment[discretePortInstanceID][muml_finished_50]].messages[0],
consume(discretePortInstanceID, muml_finished_50),
intermediateLocationSemaphore++
</label>
<nail x="499" y="360"/>
<nail x="529" y="343"/>
<nail x="566" y="323"/>
<nail x="598" y="306"/>
</transition>
<transition>
<source ref="muml_BrakingAllowed_104_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<target ref="INTERMEDIATE_41_muml_overtakee_Role_101_14"/>
<label kind="select">choice_45 : int[0,1]</label>
<label kind="guard">receive(discretePortInstanceID, muml_request_47) and not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
muml_c_eval_108_35[componentInstanceID] = 0,
msg = buffers[discretePortInstanceID][buffer_assignment[discretePortInstanceID][muml_request_47]].messages[0],
muml_accepted_102_34[componentInstanceID] = choice_45,
consume(discretePortInstanceID, muml_request_47),
intermediateLocationSemaphore++
</label>
<nail x="300" y="418"/>
<nail x="264" y="431"/>
<nail x="229" y="451"/>
<nail x="204" y="480"/>
<nail x="159" y="530"/>
<nail x="172" y="560"/>
<nail x="172" y="628"/>
<nail x="172" y="751"/>
<nail x="172" y="751"/>
<nail x="172" y="751"/>
<nail x="172" y="821"/>
<nail x="176" y="849"/>
<nail x="224" y="900"/>
<nail x="250" y="928"/>
<nail x="287" y="947"/>
<nail x="322" y="961"/>
</transition>
<transition>
<source ref="muml_EvaluatingRequest_106_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<target ref="INTERMEDIATE_42_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="guard">not muml_accepted_102_34[componentInstanceID] and not intermediateLocationSemaphore</label>
<label kind="assignment">
sendmuml_answer_45(discretePortInstanceID, false),
intermediateLocationSemaphore++
</label>
<nail x="771" y="840"/>
<nail x="883" y="795"/>
<nail x="1099" y="710"/>
<nail x="1217" y="663"/>
</transition>
<transition>
<source ref="muml_Idle_105_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<target ref="INTERMEDIATE_43_muml_overtakee_Role_101_14"/>
<label kind="select">choice_46 : int[0,1]</label>
<label kind="guard">receive(discretePortInstanceID, muml_request_47) and not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry?</label>
<label kind="assignment">
muml_c_eval_108_35[componentInstanceID] = 0,
msg = buffers[discretePortInstanceID][buffer_assignment[discretePortInstanceID][muml_request_47]].messages[0],
muml_accepted_102_34[componentInstanceID] = choice_46,
consume(discretePortInstanceID, muml_request_47),
intermediateLocationSemaphore++
</label>
<nail x="1126" y="120"/>
<nail x="1155" y="103"/>
<nail x="1192" y="83"/>
<nail x="1222" y="66"/>
</transition>
<transition>
<source ref="INTERMEDIATE_36_muml_overtakee_Role_101_14"/>
<target ref="muml_NoBraking_103_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="700" y="719"/>
<nail x="700" y="706"/>
<nail x="700" y="691"/>
<nail x="700" y="676"/>
</transition>
<transition>
<source ref="INTERMEDIATE_37_muml_overtakee_Role_101_14"/>
<target ref="muml_BrakingAllowed_104_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="646" y="482"/>
<nail x="610" y="465"/>
<nail x="564" y="444"/>
<nail x="524" y="426"/>
</transition>
<transition>
<source ref="INTERMEDIATE_38_muml_overtakee_Role_101_14"/>
<target ref="muml_Idle_105_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="1075" y="359"/>
<nail x="1075" y="319"/>
<nail x="1075" y="245"/>
<nail x="1075" y="197"/>
</transition>
<transition>
<source ref="INTERMEDIATE_39_muml_overtakee_Role_101_14"/>
<target ref="muml_EvaluatingRequest_106_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="325" y="538"/>
<nail x="304" y="554"/>
<nail x="282" y="574"/>
<nail x="270" y="600"/>
<nail x="259" y="624"/>
<nail x="256" y="637"/>
<nail x="270" y="660"/>
<nail x="330" y="755"/>
<nail x="447" y="807"/>
<nail x="544" y="836"/>
</transition>
<transition>
<source ref="INTERMEDIATE_40_muml_overtakee_Role_101_14"/>
<target ref="muml_Idle_105_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="745" y="244"/>
<nail x="807" y="227"/>
<nail x="894" y="202"/>
<nail x="962" y="183"/>
</transition>
<transition>
<source ref="INTERMEDIATE_41_muml_overtakee_Role_101_14"/>
<target ref="muml_EvaluatingRequest_106_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="495" y="962"/>
<nail x="532" y="945"/>
<nail x="580" y="924"/>
<nail x="621" y="906"/>
</transition>
<transition>
<source ref="INTERMEDIATE_42_muml_overtakee_Role_101_14"/>
<target ref="muml_Idle_105_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="1295" y="599"/>
<nail x="1292" y="548"/>
<nail x="1280" y="441"/>
<nail x="1242" y="360"/>
<nail x="1211" y="294"/>
<nail x="1156" y="231"/>
<nail x="1118" y="192"/>
</transition>
<transition>
<source ref="INTERMEDIATE_43_muml_overtakee_Role_101_14"/>
<target ref="muml_EvaluatingRequest_106_ACTIVE_IN_muml_overtakee_Role_101_muml_overtakee_Role_101_14"/>
<label kind="select"></label>
<label kind="assignment">
intermediateLocationSemaphore--
</label>
<nail x="1369" y="55"/>
<nail x="1403" y="68"/>
<nail x="1440" y="89"/>
<nail x="1464" y="120"/>
<nail x="1505" y="173"/>
<nail x="1495" y="200"/>
<nail x="1495" y="268"/>
<nail x="1495" y="631"/>
<nail x="1495" y="631"/>
<nail x="1495" y="631"/>
<nail x="1495" y="746"/>
<nail x="1185" y="810"/>
<nail x="953" y="841"/>
</transition>
</template>
<template>
<name>UrgencyProvider</name>
<declaration>
</declaration>	
<location id="idle_UrgencyProvider" x="45" y="30" >
	<name>idle</name>
</location>
<init ref="idle_UrgencyProvider"/>
<transition>
<source ref="idle_UrgencyProvider"/>
<target ref="idle_UrgencyProvider"/>
<label kind="select"></label>
<label kind="guard">not intermediateLocationSemaphore</label>
<label kind="synchronisation">hurry!</label>
<label kind="assignment"></label>
<nail x="87" y="41"/>
<nail x="105" y="41"/>
<nail x="120" y="38"/>
<nail x="120" y="30"/>
<nail x="120" y="24"/>
<nail x="113" y="21"/>
<nail x="104" y="19"/>
</transition>
</template>
		<system>
muml_OvertakeeCompRTSC_99_16_component_2 = muml_OvertakeeCompRTSC_99_16(2);

muml_overtakee_Role_101_14_4 = muml_overtakee_Role_101_14(2, 4);

muml_OvertakerCompRTSC_59_13_component_0 = muml_OvertakerCompRTSC_59_13(0);

muml_overtaker_Role_61_6_2 = muml_overtaker_Role_61_6(0, 2);

muml_coordinator_65_7_2 = muml_coordinator_65_7(0, 2);

muml_Main_64_2 = muml_Main_64(0, 2);

muml_subrole_78_8_subport_0 = muml_subrole_78_8(0, 2, 0);

muml_subrole_78_8_subport_1 = muml_subrole_78_8(0, 2, 1);

muml_OvertakeeCompRTSC_99_16_component_1 = muml_OvertakeeCompRTSC_99_16(1);

muml_overtakee_Role_101_14_3 = muml_overtakee_Role_101_14(1, 3);

Connector_0_3 = Connector(0, 3, 0*1000, 1*1000, false);

Connector_3_0 = Connector(3, 0, 0*1000, 1*1000, false);

Connector_1_4 = Connector(1, 4, 0*1000, 1*1000, false);

Connector_4_1 = Connector(4, 1, 0*1000, 1*1000, false);

	system Connector_0_3,Connector_1_4,Connector_3_0,Connector_4_1,muml_Main_64_2,muml_OvertakeeCompRTSC_99_16_component_1,muml_OvertakeeCompRTSC_99_16_component_2,muml_OvertakerCompRTSC_59_13_component_0,muml_coordinator_65_7_2,muml_overtakee_Role_101_14_3,muml_overtakee_Role_101_14_4,muml_overtaker_Role_61_6_2,muml_subrole_78_8_subport_0,muml_subrole_78_8_subport_1,UrgencyProvider;
		</system>
	</nta>
